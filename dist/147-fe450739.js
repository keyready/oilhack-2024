"use strict";(self.webpackChunkoil_hack_2024=self.webpackChunkoil_hack_2024||[]).push([[147],{7147:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var n=a(5861),l=a(885),r=a(4687),s=a.n(r),i=a(1762),o=a(8502),c=a(3329),d=a(7294),u=a(6466),p=a(47),f=a(3379),m=a.n(f),v=a(7795),b=a.n(v),g=a(569),x=a.n(g),h=a(3565),k=a.n(h),y=a(9216),j=a.n(y),Z=a(4589),C=a.n(Z),w=a(8409),N={};N.styleTagTransform=C(),N.setAttributes=k(),N.insert=x().bind(null,"head"),N.domAPI=b(),N.insertStyleElement=j(),m()(w.Z,N);const A=w.Z&&w.Z.locals?w.Z.locals:void 0;var F=a(5893),S=(0,d.memo)((function(e){var t=e.className,a=e.file,n=e.setFile,l=(0,d.useCallback)((function(e){for(var t=["б","Кб","Мб","Гб","Тб"],a=0,n=e.size;n>1024&&a<t.length-1;)n/=1024,a+=1;return"".concat(n.toFixed(2)," ").concat(t[a])}),[]),r=(0,d.useCallback)((function(e){var t;null!==(t=e.target)&&void 0!==t&&null!==(t=t.files)&&void 0!==t&&t.length&&n(e.target.files[0])}),[n]);return(0,F.jsxs)("label",{htmlFor:"file_upload",className:A.button,children:[null!=a&&a.size?(0,F.jsx)(u.xv,{titleClassname:A.title,title:a.name,text:l(a),align:"center"}):(0,F.jsx)(u.xv,{align:"center",titleClassname:A.title,title:"Выберите файл"}),(0,F.jsx)("input",{id:"file_upload",style:{display:"none"},onChange:r,type:"file",accept:".csv",className:(0,o.A)(A.FileUploader,{},[t])})]})})),_=a(9400),T=a(3837),W=a(123),z=a(9250),I=a(1637),L={};L.styleTagTransform=C(),L.setAttributes=k(),L.insert=x().bind(null,"head"),L.domAPI=b(),L.insertStyleElement=j(),m()(I.Z,L);const P=I.Z&&I.Z.locals?I.Z.locals:void 0,D=function(){var e=(0,z.s0)(),t=(0,d.useState)(),a=(0,l.Z)(t,2),r=a[0],f=a[1],m=(0,d.useState)(""),v=(0,l.Z)(m,2),b=v[0],g=v[1],x=(0,d.useState)(!1),h=(0,l.Z)(x,2),k=h[0],y=h[1],j=(0,d.useCallback)((function(e){g(""),f(e)}),[]),Z=(0,d.useCallback)(function(){var t=(0,n.Z)(s().mark((function t(a){var n,l,i,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),y(!0),t.prev=2,!r){t.next=10;break}return(n=new FormData).append("file",r),t.next=8,T.W.post("/api/calculate",n);case 8:l=t.sent,e("".concat(W.h3.results,"?fileId=").concat(l.data));case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),o=t.t0,g((null===(i=o.response)||void 0===i?void 0:i.data.message)||"Произошла ошибка запроса на сервер");case 16:y(!1),f(void 0);case 18:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),[r,e]);return(0,F.jsxs)(i.T,{style:{background:"url(/static/bgImg.svg)"},className:(0,o.A)(P.MainPage,{},[]),children:[k&&(0,F.jsx)("div",{className:P.overlay,children:(0,F.jsx)(p.a,{})}),(0,F.jsxs)(c.g,{gap:"32",maxW:!0,justify:"center",align:"center",children:[(0,F.jsx)("img",{className:P.mainLogo,src:"/static/mainLogo.svg",alt:"Картинка"}),(0,F.jsx)("form",{onSubmit:Z,style:{width:"100%"},children:(0,F.jsxs)(c.g,{gap:"32",align:"center",maxW:!0,children:[(0,F.jsx)(S,{file:r,setFile:j}),r&&(0,F.jsx)(_.z,{type:"submit",children:"Отправить на обработку"})]})}),b&&(0,F.jsx)(u.xv,{className:P.textWrapper,title:b,size:"large",variant:"error"})]})]})}},1637:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(8081),l=a.n(n),r=a(3645),s=a.n(r)()(l());s.push([e.id,".d721c{width:450px}.dc3d4{padding:5px 20px;border-radius:12px;background:#fff}.bbd4f{background:rgba(0,0,0,.5);display:flex;flex-direction:column;align-items:center;justify-content:center;backdrop-filter:blur(5px);position:absolute;top:0;bottom:0;right:0;left:0}",""]),s.locals={mainLogo:"d721c",textWrapper:"dc3d4",overlay:"bbd4f"};const i=s},8409:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(8081),l=a.n(n),r=a(3645),s=a.n(r)()(l());s.push([e.id,".dc445{cursor:pointer;padding:40px 60px;border-radius:12px;color:var(--inverted-primary-color);background:var(--bg-color);font:var(--font-m);transition:200ms;min-width:50%;outline:6px dotted var(--blue-500)}.dc445:hover{background:var(--inverted-bg-color)}.f4735{color:var(--blue-700) !important}",""]),s.locals={button:"dc445",title:"f4735"};const i=s}}]);