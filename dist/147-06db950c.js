"use strict";(self.webpackChunkoil_hack_2024=self.webpackChunkoil_hack_2024||[]).push([[147],{7147:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var a=n(5861),r=n(885),l=n(4687),s=n.n(l),i=n(1762),o=n(8502),c=n(3329),d=n(7294),u=n(6466),p=n(47),f=n(3379),v=n.n(f),m=n(7795),x=n.n(m),b=n(569),g=n.n(b),h=n(3565),k=n.n(h),y=n(9216),j=n.n(y),Z=n(4589),w=n.n(Z),C=n(8409),N={};N.styleTagTransform=w(),N.setAttributes=k(),N.insert=g().bind(null,"head"),N.domAPI=x(),N.insertStyleElement=j(),v()(C.Z,N);const S=C.Z&&C.Z.locals?C.Z.locals:void 0;var A=n(5893),F=(0,d.memo)((function(e){var t=e.className,n=e.file,a=e.setFile,r=(0,d.useCallback)((function(e){for(var t=["б","Кб","Мб","Гб","Тб"],n=0,a=e.size;a>1024&&n<t.length-1;)a/=1024,n+=1;return"".concat(a.toFixed(2)," ").concat(t[n])}),[]),l=(0,d.useCallback)((function(e){var t;null!==(t=e.target)&&void 0!==t&&null!==(t=t.files)&&void 0!==t&&t.length&&a(e.target.files[0])}),[a]);return(0,A.jsxs)("label",{htmlFor:"file_upload",className:S.button,children:[null!=n&&n.size?(0,A.jsx)(u.xv,{titleClassname:S.title,title:n.name,text:r(n),align:"center"}):(0,A.jsx)(u.xv,{align:"center",titleClassname:S.title,title:"Выберите файл"}),(0,A.jsx)("input",{id:"file_upload",style:{display:"none"},onChange:l,type:"file",accept:".csv",className:(0,o.A)(S.FileUploader,{},[t])})]})})),_=n(9400),T=n(3837),W=n(1637),z={};z.styleTagTransform=w(),z.setAttributes=k(),z.insert=g().bind(null,"head"),z.domAPI=x(),z.insertStyleElement=j(),v()(W.Z,z);const I=W.Z&&W.Z.locals?W.Z.locals:void 0,L=function(){var e=(0,d.useState)(),t=(0,r.Z)(e,2),n=t[0],l=t[1],f=(0,d.useState)(""),v=(0,r.Z)(f,2),m=v[0],x=v[1],b=(0,d.useState)(""),g=(0,r.Z)(b,2),h=g[0],k=g[1],y=(0,d.useState)(!1),j=(0,r.Z)(y,2),Z=j[0],w=j[1],C=(0,d.useCallback)((function(e){k(""),l(e)}),[]),N=(0,d.useCallback)(function(){var e=(0,a.Z)(s().mark((function e(t){var a,r,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w(!0),e.prev=2,!n){e.next=10;break}return(a=new FormData).append("file",n),e.next=8,T.W.post("/api/calculate",a);case 8:"string"==typeof(r=e.sent)&&x(r);case 10:e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),o=e.t0,x(""),k((null===(i=o.response)||void 0===i?void 0:i.data.message)||"Произошла ошибка запроса на сервер");case 17:w(!1),l(void 0);case 19:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),[n]);return(0,A.jsxs)(i.T,{style:{background:"url(/static/bgImg.svg)"},className:(0,o.A)(I.MainPage,{},[]),children:[Z&&(0,A.jsx)("div",{className:I.overlay,children:(0,A.jsx)(p.a,{})}),(0,A.jsxs)(c.g,{gap:"32",maxW:!0,justify:"center",align:"center",children:[(0,A.jsx)("img",{className:I.mainLogo,src:"/static/mainLogo.svg",alt:"Картинка"}),(0,A.jsx)("form",{onSubmit:N,style:{width:"100%"},children:(0,A.jsxs)(c.g,{gap:"32",align:"center",maxW:!0,children:[(0,A.jsx)(F,{file:n,setFile:C}),n&&(0,A.jsx)(_.z,{type:"submit",children:"Отправить на обработку"})]})}),m&&(0,A.jsx)("a",{className:I.link,download:!0,href:"/media/".concat(m),children:"Скачать результат"}),h&&(0,A.jsx)(u.xv,{className:I.textWrapper,title:h,size:"large",variant:"error"})]})]})}},1637:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(8081),r=n.n(a),l=n(3645),s=n.n(l)()(r());s.push([e.id,".d721c{width:450px}.dc3d4{padding:5px 20px;border-radius:12px;background:#fff}.bbd4f{background:rgba(0,0,0,.5);display:flex;flex-direction:column;align-items:center;justify-content:center;backdrop-filter:blur(5px);position:absolute;top:0;bottom:0;right:0;left:0}.c960e:link,.c960e:visited{cursor:pointer;padding:10px 20px;border:none;border-radius:5px;color:var(--inverted-primary-color);background:var(--inverted-bg-color);font:var(--font-m);transition:200ms;text-decoration:none;outline:none}",""]),s.locals={mainLogo:"d721c",textWrapper:"dc3d4",overlay:"bbd4f",link:"c960e"};const i=s},8409:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(8081),r=n.n(a),l=n(3645),s=n.n(l)()(r());s.push([e.id,".dc445{cursor:pointer;padding:40px 60px;border-radius:12px;color:var(--inverted-primary-color);background:var(--bg-color);font:var(--font-m);transition:200ms;min-width:50%;outline:6px dotted var(--blue-500)}.dc445:hover{background:var(--inverted-bg-color)}.f4735{color:var(--blue-700) !important}",""]),s.locals={button:"dc445",title:"f4735"};const i=s}}]);